# 1 VPN(Virtual Private Network)

- VPN은 공인 네트워크(일반적으로 인터넷)를 통해 사설 네트워크(프라이빗 네트워크)에 안전하게 연결할 수 있도록 하는 기술입니다.
- VPN은 원격 사용자, 지사, 또는 기타 비즈니스 파트너가 중앙 네트워크에 안전하게 접속할 수 있게 해줍니다.
- VPN은 공용 네트워크를 통해 전송되는 데이터를 암호화하여 안전하게 보호합니다. 이를 통해 데이터 도청, 변조, 위조 등의 위험을 줄일 수 있습니다.

<br>

> [!] Private Network
> Private network는 특정 조직이나 개인이 사용하는 네트워크를 의미합니다. 이 네트워크는 일반적으로 인터넷과는 별도로 운영되며, 외부에서는 접근할 수 없습니다. Private network는 보안을 유지하기 위해 필요하며, 특히 기업 환경에서는 중요한 데이터를 보호하기 위해 사용됩니다. VPN은 이러한 private network에 안전하게 접속할 수 있는 수단을 제공합니다.

<br>

# 2 주요 기능

- 보안: VPN은 인터넷과 같은 공용 네트워크를 통해 전송되는 데이터를 암호화하여 보안을 강화합니다. 이를 통해 데이터 도청, 변조, 위조 등의 위험을 줄일 수 있습니다.
- 원격 액세스: VPN을 사용하면 사용자가 어디에 있든 프라이빗 네트워크에 접속할 수 있습니다. 이는 재택근무, 출장 등의 상황에서 유용합니다. 사용자는 마치 사무실에 있는 것처럼 회사 네트워크의 자원에 접근할 수 있습니다.
- 비용 절감: VPN을 사용하면 전용선을 구축하지 않고도 안전한 네트워크 연결을 설정할 수 있어 비용을 절감할 수 있습니다. 인터넷을 통해 연결하므로 별도의 물리적 인프라 구축이 필요하지 않습니다.
- IP 주소 숨김: VPN은 사용자의 실제 IP 주소를 숨기고 VPN 서버의 IP 주소를 대신 사용하므로 사용자의 위치와 온라인 활동을 숨길 수 있습니다. 이는 사용자의 프라이버시를 보호하는 데 도움이 됩니다.

<br>

# 3 프로토콜

- VPN은 다양한 프로토콜을 사용하여 구현될 수 있으며, 대표적인 프로토콜로는 OpenVPN, IPsec, PPTP, L2TP 등이 있습니다. 
- 각 프로토콜은 보안 수준, 성능, 호환성 등에서 차이가 있습니다

<br>

# 4 openVPN

- OpenVPN은 SSL/TLS 프로토콜을 기반으로 하는 개방형 소스 VPN 솔루션입니다.
- OpenVPN은 높은 보안성, 유연성, 확장성을 제공하며, 다양한 운영 체제에서 사용할 수 있습니다.
- OpenVPN은 UDP 또는 TCP 프로토콜을 사용하여 통신하며, 포트 443을 사용하여 방화벽 통과가 용이합니다.

<br>

**동작 방식**

1. 인증: OpenVPN 클라이언트와 서버는 사전 공유 키, 인증서, 또는 사용자 이름/비밀번호를 사용하여 상호 인증합니다.
2. 키 교환: 인증이 완료되면 클라이언트와 서버는 대칭 암호화 키와 세션 키를 교환합니다. 이 키들은 이후 데이터 암호화에 사용됩니다.
3. 터널 생성: OpenVPN은 UDP 또는 TCP 프로토콜을 사용하여 클라이언트와 서버 간에 암호화된 터널을 생성합니다.
4. 데이터 암호화: 터널을 통해 전송되는 모든 데이터는 공유된 키를 사용하여 암호화 및 복호화됩니다.
5. 압축 및 패킷 인증: OpenVPN은 선택적으로 데이터 압축과 패킷 인증을 지원하여 전송 효율을 높이고 무결성을 보장합니다.

<br>

## 4.1 .ovpn 파일

-  OpenVPN 클라이언트 구성 파일입니다.
- 이 파일에는 OpenVPN 연결을 설정하는 데 필요한 모든 구성 정보가 포함되어 있습니다. 
- 이 파일은 일반적으로 OpenVPN 서버 관리자가 생성하여 클라이언트에게 제공합니다.

<br>

# 5 IPsec

- IPsec(Internet Protocol Security)은 IP 네트워크 상에서 안전한 통신을 제공하는 프로토콜 스위트입니다.
- IPsec은 데이터 기밀성, 무결성, 인증을 제공하여 안전한 통신을 보장합니다.]
- IPsec은 터널 모드와 전송 모드, 두 가지 모드로 동작할 수 있습니다.

<br>

## 6.1 터널 모드

- 터널 모드에서는 전체 IP 패킷(헤더 포함)이 암호화되고 새로운 IP 헤더(아우터 헤더)가 추가됩니다.
- 원본 IP 패킷은 ESP(Encapsulating Security Payload) 페이로드로 캡슐화되고, ESP 헤더와 트레일러가 추가됩니다.
- 새로운 IP 헤더(아우터 헤더)는 터널 엔드포인트의 IP 주소를 소스와 목적지로 사용합니다.
- 터널 모드는 주로 VPN에 사용되며, 게이트웨이 간 통신을 보호합니다.
- 터널 모드는 프라이빗 네트워크의 호스트와 통신할 때 사용됩니다. 이 경우, 프라이빗 네트워크의 호스트는 터널 엔드포인트 뒤에 위치하게 됩니다.

<br>

## 6.2 전송 모드

- 전송 모드에서는 IP 페이로드만 암호화되고 원본 IP 헤더는 그대로 유지됩니다.
- AH(Authentication Header) 또는 ESP 헤더는 원본 IP 헤더와 페이로드 사이에 삽입됩니다.
- 전송 모드는 주로 호스트 간 통신을 보호하는 데 사용됩니다.

