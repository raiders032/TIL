# 1 SQS

- Simple Queue Service는 AWS에서 제공하는 완전 관리형 메시지 대기열 서비스다
- SQS를 사용하면 큰 규모의 분산 애플리케이션에서 컴포넌트 간에 메시지를 보내고 받을 수 있다.
- SQS는 거의 무제한의 메시지 및 거래 처리가 가능하므로 애플리케이션의 요구 사항에 따라 자동으로 확장된다.

<br>

## 1.1 Type

- SQS는 두 가지 종류의 큐 타입을 제공한다.
	- Standard Queues
	- FIFO Queues
- Standard Queues는 애플리케이션이 한 번 이상 도착하고 순서대로 처리되지 않는 메시지를 처리할 수 있는 경우 사용할 수 있다.
- FIFO Queues는 작업 및 이벤트의 순서가 중요하거나 중복을 허용할 수 없는 애플리케이션 간의 메시징 전송을 위해 사용할 수 있다.

<br>

### 1.1.1 Standard Queues

* 무제한 처리량
	* 표준 큐는 API 액션 당 초당 거의 무제한의 트랜잭션을 지원합니다
* 적어도 한 번의 전달
	* 메시지는 최소 한 번 전달되지만, 가끔 메시지의 복사본이 하나 이상 전달될 수 있다.
* Best-Effort Ordering
	* 가끔 메시지는 전송된 순서와 다른 순서로 전달될 수 있습니다.

<br>

### 1.1.2 FIFO Queues

- 높은 처리량
	- 기본적으로 FIFO 큐는 배치를 사용하여 초당 최대 3,000개의 메시지를 지원하거나 배치를 사용하지 않을 경우 초당 최대 300개의 메시지(초당 300번의 전송, 수신 또는 삭제 작업)를 지원한다.
	- 더 높은 처리량이 필요한 경우 Amazon SQS 콘솔에서 FIFO에 대한 높은 처리량 모드를 활성화할 수 있으며, 이 모드는 배치 없이 초당 최대 9,000개의 메시지를 지원하며 배치를 사용할 경우 더 높아진다.
- 단 한 번의 처리
	- 메시지는 한 번 전달되며 소비자가 처리하고 삭제할 때까지 사용이 가능하다.
	- 큐에 중복 항목이 도입되지 않습니다.
- 선입선출 전달
	- 메시지가 전송되고 수신되는 순서가 엄격하게 유지된다.

<br>

# 1.2 SNS와 차이점

| SNS                                                        | SQS                                                    |
| ----------------------------------------------------------- | ------------------------------------------------------ |
| Simple Notification Service                                 | Simple Queue Service                                   |
| Pub/Sun System                                              | Queueing Service                                       |
| push                                                        | poll                                                   |
| 메시지를 토픽에 게시하면 여러 구독자에게 메시지가 전달된다. | 일반적으로 큐의 메시지는 하나의 컨슈머에 의해서 처리됨 |
|                                                             |                                                        |

<br>

# 2 short and long polling

- SQS는 short polling 과 long polling 둘 다 제공한다.
	- 기본 값은 short polling이다.
- long polling을 사용하면 호출되는 API의 횟수를 줄일 수 있다.
- short polling
	- 만약 큐가 비어있다면 바로 응답을 받는다.
- long polling
	- 만약 큐가 비어있다면 적어도 하나의 메시지를 수집한 후 응답을 보냅니다

